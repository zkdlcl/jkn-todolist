# JKN-TODOLIST 사용자 시나리오

## 문서 정보

**문서 버전**: 1.1
**작성일**: 2025-11-27
**작성자**: UX Designer / Product Manager
**상태**: 최종 (Final)
**관련 문서**: [PRD](./2-product-requirements.md), [도메인 정의서](./1-domain-definition.md), [실행 계획](./7-implementation_plan.md)

---

## 목차

1. [개요](#1-개요)
2. [시나리오 작성 원칙](#2-시나리오-작성-원칙)
3. [주요 사용자 시나리오](#3-주요-사용자-시나리오)
4. [예외 상황 시나리오](#4-예외-상황-시나리오)
5. [엣지 케이스](#5-엣지-케이스)

---

## 1. 개요

### 1.1 목적

이 문서는 JKN-TODOLIST의 실제 사용자 시나리오를 상세히 기술하여:

- 개발팀이 사용자 관점에서 기능을 구현할 수 있도록 가이드 제공
- QA 팀의 테스트 케이스 작성 기반 제공
- 제품 기획의 사용성 검증
- 사용자 매뉴얼 작성 기반 제공

### 1.2 시나리오 범위

**포함 범위**:

- MVP 필수 기능 (P0)
- 주요 사용자 플로우
- 예외 상황 및 에러 처리
- 권한별 시나리오 (일반 사용자, 관리자)
- 달력 기능 사용 시나리오
- 알림 시스템 시나리오

**제외 범위**:

- 팀 협업 기능 (향후 확장)
- 성능 테스트 시나리오
- 보안 침투 테스트 시나리오

---

## 2. 시나리오 작성 원칙

### 2.1 시나리오 구조

각 시나리오는 다음 구조를 따릅니다:

- **시나리오 ID**: 고유 식별자
- **시나리오명**: 간략한 제목
- **페르소나**: 해당 시나리오의 주인공
- **사전 조건**: 시나리오 시작 전 충족해야 할 조건
- **단계**: 사용자 액션과 시스템 반응
- **기대 결과**: 시나리오 완료 후 예상 상태
- **관련 요구사항**: 도메인 정의서의 REQ-XXX 참조

### 2.2 표기 규칙

- **[사용자 액션]**: 사용자가 수행하는 동작
- **[시스템 반응]**: 시스템의 응답
- **[표시]**: 화면에 표시되는 내용
- **[검증]**: 확인해야 할 사항

---

## 3. 주요 사용자 시나리오

### 3.1 인증 관련 시나리오

#### SC-001: 신규 사용자 회원가입

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 JKN-TODOLIST에 가입되어 있지 않음
- 유효한 이메일 주소 보유
- 브라우저에서 서비스 접속 가능

**단계**:

1. **[사용자 액션]** 브라우저에서 `https://jkn-todolist.com` 접속
2. **[시스템 반응]** 로그인 페이지 표시
3. **[표시]** "로그인" 버튼과 "회원가입" 링크 표시
4. **[사용자 액션]** "회원가입" 링크 클릭
5. **[시스템 반응]** 회원가입 페이지로 이동
6. **[표시]** 회원가입 폼 표시:
   - 이메일 입력 필드
   - 비밀번호 입력 필드
   - 비밀번호 확인 입력 필드
   - 이름 입력 필드
   - "가입하기" 버튼
7. **[사용자 액션]** 폼 입력:
   - 이메일: `gyehoek@student.ac.kr`
   - 비밀번호: `Student@123`
   - 비밀번호 확인: `Student@123`
   - 이름: `이계획`
8. **[사용자 액션]** "가입하기" 버튼 클릭
9. **[시스템 반응]** 입력값 검증:
   - 이메일 형식 검증 (RFC 5322)
   - 비밀번호 정책 검증 (최소 8자, 대소문자+숫자+특수문자)
   - 비밀번호 일치 확인
   - 중복 이메일 확인
10. **[시스템 반응]** 회원가입 처리:
    - User 테이블에 새 레코드 생성
    - 비밀번호 bcrypt로 암호화 저장
    - 기본 역할 ROLE_USER 할당
11. **[시스템 반응]** JWT 토큰 발급:
    - Access Token (15분 유효)
    - Refresh Token (7일 유효)
12. **[시스템 반응]** 자동 로그인 후 할일 목록 페이지로 리다이렉트
13. **[표시]** 환영 메시지: "이계획님, 환영합니다!"
14. **[표시]** 빈 할일 목록과 "첫 할일을 추가해보세요!" 안내 메시지

**기대 결과**:

- ✅ 새 사용자 계정 생성됨
- ✅ 사용자가 로그인된 상태
- ✅ 할일 목록 페이지 접근 가능
- ✅ Refresh Token이 데이터베이스에 저장됨

**관련 요구사항**:

- REQ-USER-001 (이메일 형식 검증)
- REQ-USER-002 (비밀번호 정책)
- REQ-USER-003 (중복 이메일 가입 불가)
- REQ-USER-004 (역할 할당)
- REQ-USER-005 (비밀번호 암호화)
- REQ-AUTH-001 (JWT 기반 인증)
- REQ-AUTH-002 (Access Token 정책)
- REQ-AUTH-003 (Refresh Token 정책)

---

#### SC-002: 기존 사용자 로그인

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 이미 가입되어 있음
- 계정이 활성 상태 (비활성화되지 않음)

**단계**:

1. **[사용자 액션]** 브라우저에서 `https://jkn-todolist.com` 접속
2. **[시스템 반응]** 로그인 페이지 표시
3. **[표시]** 로그인 폼:
   - 이메일 입력 필드
   - 비밀번호 입력 필드
   - "로그인" 버튼
   - "회원가입" 링크
4. **[사용자 액션]** 폼 입력:
   - 이메일: `hyojul@company.com`
   - 비밀번호: `Work@2024`
5. **[사용자 액션]** "로그인" 버튼 클릭
6. **[시스템 반응]** 인증 처리:
   - 이메일로 사용자 조회
   - 비밀번호 검증 (bcrypt.compare)
7. **[시스템 반응]** JWT 토큰 발급:
   - Access Token 생성 (user_id, email, role 포함)
   - Refresh Token 생성 및 DB 저장
8. **[시스템 반응]** 마지막 로그인 일시 업데이트
9. **[시스템 반응]** 할일 목록 페이지로 리다이렉트
10. **[표시]** 사용자의 할일 목록 표시

**기대 결과**:

- ✅ 사용자가 로그인된 상태
- ✅ Access Token과 Refresh Token 발급됨
- ✅ 할일 목록 페이지 접근 가능
- ✅ 사용자명이 헤더에 표시됨

**관련 요구사항**:

- REQ-AUTH-001 (JWT 기반 인증)
- REQ-AUTH-002 (Access Token 정책)
- REQ-AUTH-003 (Refresh Token 정책)
- REQ-AUTH-004 (로그인 실패 처리)

---

#### SC-003: 로그아웃

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태

**단계**:

1. **[사용자 액션]** 할일 목록 페이지에서 헤더의 사용자명 클릭
2. **[시스템 반응]** 드롭다운 메뉴 표시:
   - "프로필"
   - "설정"
   - "로그아웃"
3. **[사용자 액션]** "로그아웃" 클릭
4. **[시스템 반응]** 로그아웃 처리:
   - Refresh Token을 DB에서 무효화 (NULL로 설정)
   - 클라이언트의 Access Token 제거
5. **[시스템 반응]** 로그인 페이지로 리다이렉트
6. **[표시]** "로그아웃되었습니다" 메시지

**기대 결과**:

- ✅ 사용자 로그아웃됨
- ✅ Refresh Token이 무효화됨
- ✅ 로그인 페이지로 이동
- ✅ 인증이 필요한 페이지 접근 시 로그인 페이지로 리다이렉트

**관련 요구사항**:

- REQ-AUTH-003 (Refresh Token 정책)

---

### 3.2 할일 관리 시나리오

#### SC-004: 새 할일 추가

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록 페이지에 있음

**단계**:

1. **[사용자 액션]** "새 할일 추가" 버튼 클릭
2. **[시스템 반응]** 할일 추가 모달 팝업 표시
3. **[표시]** 할일 추가 폼:
   - 제목 입력 필드 (필수, placeholder: "할일 제목을 입력하세요")
   - 내용 입력 필드 (선택, placeholder: "상세 내용을 입력하세요")
   - 시작 일시 선택 (Datepicker)
   - 만료 일시 선택 (Datepicker)
   - 우선순위 선택 (LOW, MEDIUM, HIGH)
   - "저장" 버튼
   - "취소" 버튼
4. **[사용자 액션]** 폼 입력:
   - 제목: `데이터베이스 과제 제출`
   - 내용: `3장~5장 연습문제 풀이 및 ER 다이어그램 작성`
   - 시작 일시: `2025-11-26 09:00`
   - 만료 일시: `2025-11-28 23:59`
   - 우선순위: `HIGH`
5. **[사용자 액션]** "저장" 버튼 클릭
6. **[시스템 반응]** 입력값 검증:
   - 제목 필수 확인 (1~200자)
   - 만료 일시가 시작 일시보다 이후인지 확인
   - 우선순위 값 유효성 확인
7. **[시스템 반응]** 할일 생성:
   - Todo 테이블에 새 레코드 생성
   - owner_id: 현재 로그인 사용자 ID
   - deleted_status: 'ACTIVE'
   - is_completed: false
   - priority: 3 (HIGH)
   - created_at, updated_at: 현재 시각
8. **[시스템 반응]** 모달 닫기 및 할일 목록 새로고침
9. **[표시]** 새로 추가된 할일이 목록 상단에 표시:
   - 체크박스 (미완료 상태)
   - 제목: "데이터베이스 과제 제출"
   - 만료 일시: "2025-11-28 23:59" (빨간색 강조)
   - 우선순위 배지: "높음" (빨간색)
   - 수정/삭제 아이콘
10. **[표시]** 성공 메시지: "할일이 추가되었습니다"

**기대 결과**:

- ✅ 새 할일이 데이터베이스에 저장됨
- ✅ 할일 목록에 표시됨
- ✅ 할일이 owner_id로 현재 사용자와 연결됨
- ✅ 우선순위에 따라 정렬됨 (HIGH > MEDIUM > LOW)

**관련 요구사항**:

- REQ-TODO-001 (제목 필수 입력)
- REQ-TODO-002 (만료 일시 검증)
- REQ-TODO-003 (기본값 설정)
- REQ-TODO-009 (우선순위 값 검증)
- REQ-TODO-010 (날짜 형식)

---

#### SC-005: 할일 목록 조회 및 필터링

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 사용자가 5개의 할일 보유 (2개 완료, 3개 미완료)

**단계**:

1. **[사용자 액션]** 할일 목록 페이지 접속
2. **[시스템 반응]** 할일 조회:
   - WHERE owner_id = 현재 사용자 ID
   - AND deleted_status = 'ACTIVE'
   - ORDER BY priority DESC, due_date ASC
3. **[표시]** 할일 목록 표시:
   - 총 5개 할일 표시
   - 완료된 할일 2개 (취소선 표시)
   - 미완료 할일 3개
4. **[표시]** 필터 옵션:
   - "전체" (기본 선택)
   - "미완료"
   - "완료"
5. **[사용자 액션]** "미완료" 필터 클릭
6. **[시스템 반응]** 필터링 적용:
   - WHERE owner_id = 현재 사용자 ID
   - AND deleted_status = 'ACTIVE'
   - AND is_completed = false
7. **[표시]** 미완료 할일 3개만 표시
8. **[표시]** 정렬 옵션:
   - "우선순위" (기본 선택)
   - "만료 일시"
   - "생성 일시"
9. **[사용자 액션]** "만료 일시" 정렬 선택
10. **[시스템 반응]** 정렬 변경:
    - ORDER BY due_date ASC
11. **[표시]** 만료 일시가 가까운 순서로 할일 재정렬

**기대 결과**:

- ✅ 사용자 본인의 할일만 조회됨
- ✅ 필터링이 즉시 적용됨
- ✅ 정렬이 즉시 반영됨
- ✅ 완료/미완료 상태가 시각적으로 구분됨

**관련 요구사항**:

- REQ-TODO-004 (할일 조회)
- REQ-TODO-007 (소유자 검증)

---

#### SC-006: 할일 상세 조회 및 수정

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록에 할일이 존재함

**단계**:

1. **[사용자 액션]** 할일 목록에서 할일 제목 클릭
2. **[시스템 반응]** 할일 상세 모달 팝업 표시
3. **[표시]** 할일 상세 정보:
   - 제목: "프로젝트 기획서 작성"
   - 내용: "Q4 신규 프로젝트 기획서 초안 작성 및 팀원 검토"
   - 시작 일시: "2025-11-25 09:00"
   - 만료 일시: "2025-11-27 18:00"
   - 우선순위: "높음"
   - 생성 일시: "2025-11-25 08:30"
   - 완료 여부: "미완료"
   - "수정" 버튼
   - "닫기" 버튼
4. **[사용자 액션]** "수정" 버튼 클릭
5. **[시스템 반응]** 편집 모드로 전환
6. **[표시]** 모든 필드가 입력 가능한 상태로 변경
7. **[사용자 액션]** 내용 수정:
   - 내용: "Q4 신규 프로젝트 기획서 초안 작성 및 팀원 검토 (변경: 내일까지 1차 초안 완성)"
   - 만료 일시: "2025-11-26 18:00" (하루 앞당김)
8. **[사용자 액션]** "저장" 버튼 클릭
9. **[시스템 반응]** 수정 처리:
   - 소유자 검증 (owner_id == 현재 사용자 ID)
   - Todo 레코드 업데이트
   - updated_at: 현재 시각
10. **[시스템 반응]** 모달 닫기 및 할일 목록 새로고침
11. **[표시]** 수정된 할일이 목록에 반영됨
12. **[표시]** 성공 메시지: "할일이 수정되었습니다"

**기대 결과**:

- ✅ 할일이 수정됨
- ✅ updated_at이 갱신됨
- ✅ 소유자만 수정 가능 (권한 검증)
- ✅ 수정 내역이 즉시 반영됨

**관련 요구사항**:

- REQ-TODO-005 (할일 수정)
- REQ-TODO-007 (소유자 검증)

---

#### SC-007: 할일 완료 처리 및 취소

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록에 미완료 할일이 존재함

**단계**:

1. **[사용자 액션]** 할일 목록에서 "데이터베이스 과제 제출" 항목의 체크박스 클릭
2. **[시스템 반응]** 완료 처리:
   - is_completed: false → true
   - completed_at: 현재 시각
   - updated_at: 현재 시각
3. **[표시]** 할일 표시 변경:
   - 체크박스: 체크됨
   - 제목: 취소선 표시
   - 색상: 회색으로 변경
   - 완료 일시 표시: "2025-11-26 14:30 완료"
4. **[표시]** 성공 메시지: "할일이 완료되었습니다"
5. **[사용자 액션]** 실수로 완료 처리했다는 것을 깨닫고 체크박스 다시 클릭
6. **[시스템 반응]** 완료 취소:
   - is_completed: true → false
   - completed_at: NULL
   - updated_at: 현재 시각
7. **[표시]** 할일 표시 복원:
   - 체크박스: 체크 해제
   - 제목: 취소선 제거
   - 색상: 원래 색상으로 복원

**기대 결과**:

- ✅ 할일 완료 상태가 토글됨
- ✅ completed_at이 기록/제거됨
- ✅ 시각적 변화가 즉시 반영됨
- ✅ 완료/미완료 필터링 시 정확히 분류됨

**관련 요구사항**:

- REQ-TODO-006 (할일 완료 처리)

---

#### SC-008: 할일 삭제 (소프트 삭제)

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록에 할일이 존재함

**단계**:

1. **[사용자 액션]** 할일 목록에서 "테스트 할일" 항목의 삭제 아이콘 (휴지통) 클릭
2. **[시스템 반응]** 삭제 확인 대화상자 표시
3. **[표시]** 확인 메시지:
   - "이 할일을 삭제하시겠습니까?"
   - "삭제된 할일은 휴지통에서 복구할 수 있습니다."
   - "삭제" 버튼 (빨간색)
   - "취소" 버튼
4. **[사용자 액션]** "삭제" 버튼 클릭
5. **[시스템 반응]** 소프트 삭제 처리:
   - deleted_status: 'ACTIVE' → 'DELETED'
   - deleted_at: 현재 시각
   - updated_at: 현재 시각
6. **[시스템 반응]** 할일 목록 새로고침
7. **[표시]** 삭제된 할일이 목록에서 사라짐
8. **[표시]** 성공 메시지: "할일이 삭제되었습니다. 휴지통에서 복구할 수 있습니다."

**기대 결과**:

- ✅ 할일이 소프트 삭제됨 (물리적 삭제 아님)
- ✅ deleted_status가 'DELETED'로 변경됨
- ✅ 할일 목록에 표시되지 않음
- ✅ 휴지통에서 조회 가능

**관련 요구사항**:

- REQ-RECYCLE-001 (소프트 삭제)

---

### 3.3 휴지통 관리 시나리오

#### SC-009: 휴지통 조회

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 사용자가 3개의 할일을 삭제한 상태

**단계**:

1. **[사용자 액션]** 좌측 사이드바에서 "휴지통" 메뉴 클릭
2. **[시스템 반응]** 휴지통 페이지로 이동
3. **[시스템 반응]** 삭제된 할일 조회:
   - WHERE owner_id = 현재 사용자 ID
   - AND deleted_status = 'DELETED'
   - ORDER BY deleted_at DESC
4. **[표시]** 휴지통 페이지:
   - 페이지 제목: "휴지통"
   - 삭제된 할일 3개 표시
   - 각 항목마다:
     - 제목
     - 삭제 일시 (예: "2025-11-25 15:30 삭제됨")
     - "복구" 버튼 (파란색)
     - "영구 삭제" 버튼 (빨간색)
   - "전체 비우기" 버튼 (상단)
5. **[표시]** 안내 메시지: "삭제된 할일은 복구하거나 영구 삭제할 수 있습니다. 영구 삭제 후에는 복구할 수 없습니다."

**기대 결과**:

- ✅ 사용자 본인이 삭제한 할일만 표시됨
- ✅ 최근 삭제된 순서로 정렬됨
- ✅ 복구/영구 삭제 옵션 제공

**관련 요구사항**:

- REQ-RECYCLE-002 (휴지통 조회)

---

#### SC-010: 삭제된 할일 복구

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 휴지통 페이지에 있음
- 삭제된 할일이 존재함

**단계**:

1. **[사용자 액션]** 휴지통에서 "프로젝트 기획서 작성" 항목의 "복구" 버튼 클릭
2. **[시스템 반응]** 복구 처리:
   - deleted_status: 'DELETED' → 'ACTIVE'
   - deleted_at: NULL
   - updated_at: 현재 시각
3. **[시스템 반응]** 휴지통 목록 새로고침
4. **[표시]** 복구된 할일이 휴지통에서 사라짐
5. **[표시]** 성공 메시지: "할일이 복구되었습니다"
6. **[사용자 액션]** "할일 목록" 메뉴 클릭
7. **[시스템 반응]** 할일 목록 페이지로 이동
8. **[표시]** 복구된 할일이 원래 위치(우선순위/날짜 기준)에 표시됨
9. **[검증]** 복구된 할일의 모든 속성(제목, 내용, 날짜, 우선순위)이 원본과 동일함

**기대 결과**:

- ✅ 할일이 활성 상태로 복원됨
- ✅ 원본 데이터 유지됨
- ✅ 할일 목록에 다시 표시됨
- ✅ 필터/정렬 적용 시 정상 작동

**관련 요구사항**:

- REQ-RECYCLE-003 (복구)

---

#### SC-011: 할일 영구 삭제

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 휴지통 페이지에 있음
- 삭제된 할일이 존재함

**단계**:

1. **[사용자 액션]** 휴지통에서 "오래된 메모" 항목의 "영구 삭제" 버튼 클릭
2. **[시스템 반응]** 영구 삭제 확인 대화상자 표시
3. **[표시]** 경고 메시지:
   - "⚠️ 주의: 이 작업은 되돌릴 수 없습니다"
   - "영구 삭제된 할일은 복구할 수 없습니다. 계속하시겠습니까?"
   - "영구 삭제" 버튼 (빨간색, 강조)
   - "취소" 버튼
4. **[사용자 액션]** "영구 삭제" 버튼 클릭
5. **[시스템 반응]** 물리적 삭제 처리:
   - DELETE FROM todos WHERE id = [할일 ID]
6. **[시스템 반응]** 휴지통 목록 새로고침
7. **[표시]** 영구 삭제된 할일이 휴지통에서 사라짐
8. **[표시]** 성공 메시지: "할일이 영구 삭제되었습니다"

**기대 결과**:

- ✅ 할일이 데이터베이스에서 완전히 제거됨
- ✅ 복구 불가능
- ✅ 휴지통에서도 조회되지 않음

**관련 요구사항**:

- REQ-RECYCLE-004 (영구 삭제)

---

#### SC-012: 휴지통 전체 비우기

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 휴지통에 5개 이상의 할일이 있음

**단계**:

1. **[사용자 액션]** 휴지통 페이지 상단의 "전체 비우기" 버튼 클릭
2. **[시스템 반응]** 전체 비우기 확인 대화상자 표시
3. **[표시]** 경고 메시지:
   - "⚠️ 휴지통의 모든 할일을 영구 삭제하시겠습니까?"
   - "현재 5개의 할일이 영구 삭제됩니다."
   - "이 작업은 되돌릴 수 없습니다."
   - "전체 영구 삭제" 버튼 (빨간색)
   - "취소" 버튼
4. **[사용자 액션]** "전체 영구 삭제" 버튼 클릭
5. **[시스템 반응]** 일괄 삭제 처리:
   - DELETE FROM todos
   - WHERE owner_id = 현재 사용자 ID
   - AND deleted_status = 'DELETED'
6. **[시스템 반응]** 휴지통 페이지 새로고침
7. **[표시]** 빈 휴지통 화면:
   - 메시지: "휴지통이 비어 있습니다"
   - 아이콘: 빈 휴지통 이미지
8. **[표시]** 성공 메시지: "휴지통이 비워졌습니다 (5개 할일 영구 삭제)"

**기대 결과**:

- ✅ 휴지통의 모든 할일이 영구 삭제됨
- ✅ 복구 불가능
- ✅ 휴지통이 빈 상태

**관련 요구사항**:

- REQ-RECYCLE-004 (영구 삭제)

---

## 3.4 달력 기능 시나리오

#### SC-013: 달력 뷰에서 할일 확인

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록에 3개의 할일이 있음 (2025-11-28, 2025-12-01, 2025-12-05)

**단계**:

1. **[사용자 액션]** 좌측 사이드바에서 "달력" 메뉴 클릭
2. **[시스템 반응]** 달력 페이지로 이동
3. **[표시]** 월간 달력 표시 (2025년 11월):
   - 28일에 빨간색 할일 마커 표시 ("프로젝트 마감일")
   - 30일에 파란색 공휴일 표시 ("국군의 날")
   - 12월 1일에 빨간색 할일 마커 표시 ("회의 준비")
   - 5일에 빨간색 할일 마커 표시 ("프리젠테이션")
4. **[사용자 액션]** 11월 28일 날짜 클릭
5. **[시스템 반응]** 사이드바 열림
6. **[표시]** 11월 28일에 속한 할일 목록 표시:
   - "프로젝트 마감일" (우선순위: HIGH, 만료: 23:59)
7. **[사용자 액션]** 할일 클릭
8. **[시스템 반응]** 할일 상세 모달 팝업
9. **[표시]** 할일 상세 정보 표시

**기대 결과**:

- ✅ 할일이 달력에 시각적으로 표시됨
- ✅ 공휴일과 할일이 색상으로 구분됨
- ✅ 날짜 클릭으로 해당 일의 할일 확인 가능
- ✅ 할일 클릭으로 상세 정보 확인 가능

**관련 요구사항**:

- REQ-CALENDAR-001 (달력 표시)
- REQ-CALENDAR-002 (이벤트 타입별 색상 구분)

---

#### SC-014: 달력에서 주/일별 보기 전환

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 달력 페이지에 있음

**단계**:

1. **[사용자 액션]** 달력 상단의 "월" 보기 선택된 상태 확인
2. **[사용자 액션]** "주" 보기 버튼 클릭
3. **[시스템 반응]** 주간 뷰로 전환
4. **[표시]** 현재 주(11/24~11/30)의 일정 표시:
   - 월요일 24일: 할일 1개
   - 수요일 26일: 할일 2개
   - 금요일 28일: 할일 1개
   - 일요일 30일: 공휴일 "국군의 날"
5. **[사용자 액션]** "일" 보기 버튼 클릭
6. **[시스템 반응]** 일간 뷰로 전환
7. **[표시]** 오늘(11/26)의 일정만 표시:
   - 오전 9:00: "과제 제출 준비"
   - 오후 2:00: "팀 미팅"
8. **[사용자 액션]** "월" 보기 버튼 클릭
9. **[시스템 반응]** 월간 뷰로 다시 전환

**기대 결과**:

- ✅ 보기 모드가 원활히 전환됨
- ✅ 주간/일간 뷰에서 할일과 공휴일이 정상 표시됨
- ✅ 시간 정보가 포함된 일정은 올바르게 표시됨

**관련 요구사항**:

- REQ-CALENDAR-003 (보기 모드 전환)

---

#### SC-015: 달력 툴팁 기능 사용

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 달력 페이지에 있음
- 할일과 공휴일이 달력에 표시됨

**단계**:

1. **[사용자 액션]** 마우스를 달력의 할일 이벤트 위로 이동
2. **[시스템 반응]** 툴팁 표시:
   - 제목: "회의 준비"
   - 만료 일시: "2025-12-01 14:00"
   - 우선순위: "높음"
   - 내용: "Q4 마케팅 전략 회의 준비"
3. **[사용자 액션]** 마우스를 공휴일 위로 이동
4. **[시스템 반응]** 툴팁 표시:
   - 제목: "성탄절"
   - 날짜: "2025-12-25"
   - 유형: "기념일"
5. **[사용자 액션]** 툴팁 영역 벗어남
6. **[시스템 반응]** 툴팁 사라짐

**기대 결과**:

- ✅ 할일/공휴일에 마우스 오버 시 툴팁 표시
- ✅ 툴팁에 상세 정보 포함됨
- ✅ 할일과 공휴일 툴팁이 구분됨

**관련 요구사항**:

- REQ-CALENDAR-004 (툴팁 정보 표시)

---

### 3.5 알림 시스템 시나리오

#### SC-016: 사용자 정의 알림 표시

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 목록 페이지에 있음

**단계**:

1. **[사용자 액션]** 할일 추가 모달에서 "저장" 버튼 클릭
2. **[시스템 반응]** 알림 시스템 동작:
   - SweetAlert2 기반 사용자 정의 알림 표시
3. **[표시]** 우측 상단에 다음과 같은 알림 표시:
   - 제목: "성공"
   - 메시지: "할일이 성공적으로 추가되었습니다"
   - 타입: 성공(Success) 스타일
   - 자동 사라짐 (5초 후)
4. **[사용자 액션]** 할일 수정 시 유효성 검사 실패
5. **[시스템 반응]** 에러 알림 표시
6. **[표시]** 다음과 같은 알림 표시:
   - 제목: "오류"
   - 메시지: "만료 일시는 시작 일시 이후여야 합니다"
   - 타입: 오류(Error) 스타일
   - 수동 닫기 가능

**기대 결과**:

- ✅ 브라우저 기본 alert 대신 사용자 정의 알림 표시
- ✅ 다양한 타입의 알림 지원 (성공, 오류, 정보, 경고)
- ✅ 사용자 UX 방해 최소화

**관련 요구사항**:

- REQ-NOTIFICATION-001 (사용자 정의 알림)
- REQ-NOTIFICATION-002 (다양한 알림 타입)

---

#### SC-017: 공휴일 동기화 안내 알림

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인된 상태
- 달력 페이지에 있음
- 공휴일 동기화 버튼 클릭

**단계**:

1. **[사용자 액션]** 달력 페이지의 "공휴일 동기화" 버튼 클릭
2. **[시스템 반응]** 브라우저 기본 alert 대신 커스텀 알림 표시
3. **[표시]** 모달 또는 알림 창에 다음과 같은 내용 표시:
   - 제목: "공휴일 동기화"
   - 내용: "공휴일 정보를 동기화하려면 아래 명령어를 터미널에 입력하세요:"
   - 명령어: `node scripts/syncHolidays.js 2025`
   - "복사" 버튼 (명령어 복사 기능)
4. **[사용자 액션]** "닫기" 버튼 클릭
5. **[시스템 반응]** 알림 닫힘

**기대 결과**:

- ✅ 브라우저 alert 대신 일관된 알림 시스템 사용
- ✅ 공휴일 동기화 가이드 명확히 제공
- ✅ 명령어 복사 기능 제공

**관련 요구사항**:

- REQ-NOTIFICATION-001 (사용자 정의 알림)
- REQ-KASI-001 (동기화 가이드 제공)

---

## 4. 예외 상황 시나리오

### 4.1 인증 예외

#### SC-E001: 잘못된 비밀번호로 로그인 시도

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 가입되어 있음
- 로그인 페이지에 있음

**단계**:

1. **[사용자 액션]** 로그인 폼 입력:
   - 이메일: `hyojul@company.com`
   - 비밀번호: `WrongPassword123` (잘못된 비밀번호)
2. **[사용자 액션]** "로그인" 버튼 클릭
3. **[시스템 반응]** 인증 실패:
   - bcrypt.compare 결과 false
4. **[시스템 반응]** 로그인 실패 처리
5. **[표시]** 에러 메시지:
   - "이메일 또는 비밀번호가 올바르지 않습니다"
   - 빨간색 경고 아이콘
6. **[표시]** 폼 유지 (이메일 필드는 입력값 유지, 비밀번호 필드는 비움)

**기대 결과**:

- ✅ 로그인 실패
- ✅ 보안을 위해 이메일 존재 여부 노출 안 함
- ✅ 사용자 친화적인 에러 메시지
- ✅ 로그인 페이지에 유지

**관련 요구사항**:

- REQ-AUTH-004 (로그인 실패 처리)

---

#### SC-E002: 중복 이메일로 회원가입 시도

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 이메일 `existing@student.ac.kr`로 이미 가입된 계정이 있음

**단계**:

1. **[사용자 액션]** 회원가입 페이지에서 폼 입력:
   - 이메일: `existing@student.ac.kr` (이미 존재하는 이메일)
   - 비밀번호: `NewPassword@123`
   - 이름: `이계획`
2. **[사용자 액션]** "가입하기" 버튼 클릭
3. **[시스템 반응]** 중복 이메일 검증:
   - SELECT \* FROM users WHERE email = 'existing@student.ac.kr'
   - 결과: 레코드 존재
4. **[시스템 반응]** 회원가입 실패
5. **[표시]** 에러 메시지:
   - 이메일 필드 하단에 빨간색 메시지: "이미 사용 중인 이메일입니다"
6. **[표시]** 이메일 필드 테두리 빨간색으로 강조

**기대 결과**:

- ✅ 회원가입 실패
- ✅ 중복 이메일 검증됨
- ✅ 명확한 에러 메시지
- ✅ 사용자가 다른 이메일 입력 가능

**관련 요구사항**:

- REQ-USER-003 (중복 이메일 가입 불가)

---

#### SC-E003: 비밀번호 정책 위반

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 회원가입 페이지에 있음

**단계**:

1. **[사용자 액션]** 회원가입 폼 입력:
   - 이메일: `newuser@student.ac.kr`
   - 비밀번호: `weak` (정책 위반: 너무 짧고 특수문자 없음)
   - 이름: `신규사용자`
2. **[사용자 액션]** "가입하기" 버튼 클릭
3. **[시스템 반응]** 비밀번호 정책 검증 실패:
   - 길이 < 8자
   - 대문자 없음
   - 숫자 없음
   - 특수문자 없음
4. **[시스템 반응]** 회원가입 실패
5. **[표시]** 에러 메시지:
   - 비밀번호 필드 하단에:
     - "비밀번호는 최소 8자 이상이어야 합니다"
     - "대문자 최소 1개 포함"
     - "숫자 최소 1개 포함"
     - "특수문자 최소 1개 포함 (!@#$%^&\*)"
6. **[표시]** 비밀번호 필드 테두리 빨간색

**기대 결과**:

- ✅ 회원가입 실패
- ✅ 비밀번호 정책 검증됨
- ✅ 구체적인 요구사항 안내
- ✅ 사용자가 정책에 맞게 재입력 가능

**관련 요구사항**:

- REQ-USER-002 (비밀번호 정책)

---

#### SC-E004: Access Token 만료

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 로그인한 지 15분 경과 (Access Token 만료)
- 할일 목록 페이지에서 작업 중

**단계**:

1. **[사용자 액션]** 새 할일 추가 버튼 클릭 (Access Token 만료 후)
2. **[시스템 반응]** API 요청:
   - Authorization 헤더에 만료된 Access Token 포함
3. **[시스템 반응]** 백엔드 검증:
   - JWT 검증 실패 (만료)
   - 401 Unauthorized 응답
4. **[시스템 반응]** 프론트엔드 처리:
   - Refresh Token으로 새 Access Token 요청
   - POST /api/auth/refresh (Refresh Token 포함)
5. **[시스템 반응]** 백엔드 토큰 갱신:
   - Refresh Token 검증
   - 새 Access Token 발급 (15분 유효)
   - 새 Refresh Token 발급 (7일 유효, 일회용)
   - 기존 Refresh Token 무효화
6. **[시스템 반응]** 원래 요청 재시도:
   - 새 Access Token으로 할일 추가 모달 열기
7. **[표시]** 할일 추가 모달 정상 표시
8. **[표시]** 사용자는 토큰 갱신을 인지하지 못함 (seamless)

**기대 결과**:

- ✅ Access Token 자동 갱신됨
- ✅ 사용자 경험 끊김 없음
- ✅ Refresh Token이 일회용으로 갱신됨
- ✅ 보안 유지

**관련 요구사항**:

- REQ-AUTH-002 (Access Token 정책)
- REQ-AUTH-003 (Refresh Token 정책)

---

### 4.2 할일 관리 예외

#### SC-E005: 만료 일시가 시작 일시보다 이전

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 추가 모달에 있음

**단계**:

1. **[사용자 액션]** 할일 추가 폼 입력:
   - 제목: `과제 제출`
   - 시작 일시: `2025-11-28 09:00`
   - 만료 일시: `2025-11-27 18:00` (시작보다 이전)
2. **[사용자 액션]** "저장" 버튼 클릭
3. **[시스템 반응]** 입력값 검증:
   - 만료 일시 < 시작 일시 (검증 실패)
4. **[시스템 반응]** 저장 실패
5. **[표시]** 에러 메시지:
   - 만료 일시 필드 하단에: "만료 일시는 시작 일시 이후여야 합니다"
   - 빨간색 경고
6. **[표시]** 만료 일시 필드 테두리 빨간색

**기대 결과**:

- ✅ 할일 생성 실패
- ✅ 검증 로직 작동
- ✅ 명확한 에러 메시지
- ✅ 사용자가 올바른 날짜 입력 가능

**관련 요구사항**:

- REQ-TODO-002 (만료 일시 검증)

---

#### SC-E006: 타 사용자의 할일 수정 시도

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자 A가 로그인된 상태
- 사용자 B가 작성한 할일 ID를 알고 있음 (예: URL 조작)

**단계**:

1. **[사용자 액션]** 브라우저 주소창에 타 사용자 할일 수정 URL 입력:
   - `https://jkn-todolist.com/todos/999/edit` (사용자 B의 할일)
2. **[사용자 액션]** Enter 키
3. **[시스템 반응]** API 요청:
   - GET /api/todos/999
4. **[시스템 반응]** 백엔드 검증:
   - 할일 조회
   - owner_id (사용자 B) != 현재 사용자 ID (사용자 A)
5. **[시스템 반응]** 권한 검증 실패:
   - 403 Forbidden 응답
6. **[시스템 반응]** 에러 페이지로 리다이렉트
7. **[표시]** 에러 화면:
   - "⛔ 접근 권한이 없습니다"
   - "이 할일에 접근할 권한이 없습니다"
   - "할일 목록으로 돌아가기" 버튼

**기대 결과**:

- ✅ 타 사용자 할일 수정 차단
- ✅ 403 Forbidden 응답
- ✅ 권한 검증 작동
- ✅ 보안 유지

**관련 요구사항**:

- REQ-TODO-005 (할일 수정)
- REQ-TODO-007 (소유자 검증)
- REQ-AUTH-005 (접근 권한)

---

#### SC-E007: 제목 없이 할일 추가 시도

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 추가 모달에 있음

**단계**:

1. **[사용자 액션]** 할일 추가 폼 입력:
   - 제목: (빈 문자열)
   - 내용: `내용만 입력`
   - 만료 일시: `2025-11-30 18:00`
2. **[사용자 액션]** "저장" 버튼 클릭
3. **[시스템 반응]** 입력값 검증:
   - 제목이 비어 있음 (검증 실패)
4. **[시스템 반응]** 저장 실패
5. **[표시]** 에러 메시지:
   - 제목 필드 하단에: "제목은 필수 입력 항목입니다 (1~200자)"
   - 빨간색 경고
6. **[표시]** 제목 필드 테두리 빨간색
7. **[표시]** "저장" 버튼 비활성화 유지

**기대 결과**:

- ✅ 할일 생성 실패
- ✅ 필수 입력 검증 작동
- ✅ 명확한 에러 메시지
- ✅ 사용자가 제목 입력 가능

**관련 요구사항**:

- REQ-TODO-001 (제목 필수 입력)

---

### 4.3 휴지통 예외

#### SC-E008: 타 사용자의 휴지통 조회 시도

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자 A가 로그인된 상태

**단계**:

1. **[사용자 액션]** 브라우저 주소창에 타 사용자 휴지통 URL 입력:
   - `https://jkn-todolist.com/recycle-bin?user=B` (URL 조작 시도)
2. **[사용자 액션]** Enter 키
3. **[시스템 반응]** API 요청:
   - GET /api/todos/deleted
4. **[시스템 반응]** 백엔드 쿼리:
   - WHERE owner_id = 현재 로그인 사용자 ID (사용자 A)
   - AND deleted_status = 'DELETED'
   - (user 파라미터 무시)
5. **[시스템 반응]** 사용자 A의 휴지통만 조회
6. **[표시]** 사용자 A의 삭제된 할일만 표시

**기대 결과**:

- ✅ 타 사용자 휴지통 조회 차단
- ✅ 항상 현재 로그인 사용자의 데이터만 조회
- ✅ 권한 검증 작동
- ✅ 데이터 격리 유지

**관련 요구사항**:

- REQ-RECYCLE-002 (휴지통 조회)
- CONST-002 (데이터 격리)

---

## 5. 엣지 케이스

### 5.1 동시성 처리

#### SC-EDGE-001: 동일 할일 동시 수정

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 두 개의 브라우저 탭에서 로그인됨
- 동일한 할일을 두 탭에서 열어놓음

**단계**:

1. **[탭 1]** 할일 수정 모달 열기
2. **[탭 2]** 동일한 할일 수정 모달 열기
3. **[탭 1]** 제목 수정 후 "저장" 클릭
4. **[시스템 반응]** 할일 업데이트 성공, updated_at 갱신
5. **[탭 2]** 내용 수정 후 "저장" 클릭
6. **[시스템 반응]** 할일 업데이트 성공, 최신 updated_at으로 덮어씀
7. **[결과]** 탭 1의 수정사항이 탭 2에 의해 덮어써짐 (Last Write Wins)

**기대 결과**:

- ✅ 현재 구현: Last Write Wins (마지막 수정 승리)
- ⚠️ 향후 개선: Optimistic Locking으로 충돌 감지 및 경고

**관련 요구사항**:

- (향후 구현) 낙관적 잠금

---

### 5.2 네트워크 오류

#### SC-EDGE-002: 네트워크 끊김 중 할일 추가

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 로그인된 상태
- 할일 추가 폼 입력 중
- 네트워크 연결 끊김

**단계**:

1. **[사용자 액션]** 할일 추가 폼 입력 완료
2. **[사용자 액션]** "저장" 버튼 클릭
3. **[시스템 반응]** API 요청 실패 (네트워크 에러)
4. **[시스템 반응]** 에러 핸들링:
   - catch (error) { ... }
5. **[표시]** 에러 메시지:
   - "네트워크 오류가 발생했습니다"
   - "인터넷 연결을 확인해주세요"
   - "재시도" 버튼
6. **[사용자 액션]** 네트워크 복구 후 "재시도" 버튼 클릭
7. **[시스템 반응]** API 요청 재시도
8. **[시스템 반응]** 할일 생성 성공

**기대 결과**:

- ✅ 네트워크 오류 감지
- ✅ 사용자 친화적인 에러 메시지
- ✅ 재시도 옵션 제공
- ✅ 입력 데이터 유지 (사용자가 재입력 불필요)

**관련 요구사항**:

- NFR-AVAIL-003 (에러 처리)

---

### 5.3 대용량 데이터

#### SC-EDGE-003: 할일 목록 1000개 이상

**페르소나**: 직장인 김효율 (28세)

**사전 조건**:

- 사용자가 1000개 이상의 할일 보유
- 할일 목록 페이지 접속

**단계**:

1. **[사용자 액션]** 할일 목록 페이지 접속
2. **[시스템 반응]** API 요청:
   - GET /api/todos?limit=50&offset=0 (페이지네이션)
3. **[시스템 반응]** 최초 50개 할일 조회
4. **[표시]** 할일 목록 50개 표시
5. **[표시]** 페이지네이션 UI:
   - "이전" 버튼 (비활성화)
   - 페이지 번호 (1, 2, 3, ..., 20)
   - "다음" 버튼
6. **[사용자 액션]** 스크롤을 아래로 내림 (Infinite Scroll)
7. **[시스템 반응]** 다음 50개 자동 로드:
   - GET /api/todos?limit=50&offset=50
8. **[표시]** 추가 50개 할일 표시 (누적 100개)

**기대 결과**:

- ✅ 페이지네이션으로 성능 최적화
- ✅ 한 번에 50개씩 로드
- ✅ Infinite Scroll 지원
- ✅ 빠른 초기 로딩

**관련 요구사항**:

- NFR-PERF-001 (API 응답 시간)
- NFR-PERF-003 (데이터베이스 쿼리)

---

### 5.4 브라우저 호환성

#### SC-EDGE-004: 오래된 브라우저 접속

**페르소나**: 대학생 이계획 (22세)

**사전 조건**:

- 사용자가 Internet Explorer 11로 접속 (지원하지 않는 브라우저)

**단계**:

1. **[사용자 액션]** Internet Explorer 11에서 서비스 접속
2. **[시스템 반응]** 브라우저 감지:
   - User-Agent 확인
   - IE 11 감지
3. **[표시]** 브라우저 호환성 경고 페이지:
   - "⚠️ 지원하지 않는 브라우저입니다"
   - "JKN-TODOLIST는 최신 브라우저에 최적화되어 있습니다"
   - 권장 브라우저 목록:
     - Chrome (최신 버전)
     - Edge (최신 버전)
   - 다운로드 링크 제공
4. **[표시]** "계속 진행" 버튼 (제한된 기능으로 사용)

**기대 결과**:

- ✅ 브라우저 호환성 감지
- ✅ 사용자에게 경고 제공
- ✅ 권장 브라우저 안내
- ✅ 제한적 사용 허용 (선택)

**관련 요구사항**:

- (8.5 호환성)

---

## 6. 시나리오 매트릭스

### 6.1 시나리오-요구사항 매핑

| 시나리오 ID | 시나리오명               | 관련 요구사항                      | 우선순위 |
| ----------- | ------------------------ | ---------------------------------- | -------- |
| SC-001      | 신규 사용자 회원가입     | REQ-USER-001~005, REQ-AUTH-001~003 | P0       |
| SC-002      | 기존 사용자 로그인       | REQ-AUTH-001~004                   | P0       |
| SC-003      | 로그아웃                 | REQ-AUTH-003                       | P0       |
| SC-004      | 새 할일 추가             | REQ-TODO-001~003, REQ-TODO-009~010 | P0       |
| SC-005      | 할일 목록 조회 및 필터링 | REQ-TODO-004, REQ-TODO-007         | P0       |
| SC-006      | 할일 상세 조회 및 수정   | REQ-TODO-005, REQ-TODO-007         | P0       |
| SC-007      | 할일 완료 처리 및 취소   | REQ-TODO-006                       | P0       |
| SC-008      | 할일 삭제                | REQ-RECYCLE-001                    | P0       |
| SC-009      | 휴지통 조회              | REQ-RECYCLE-002                    | P0       |
| SC-010      | 삭제된 할일 복구         | REQ-RECYCLE-003                    | P0       |
| SC-011      | 할일 영구 삭제           | REQ-RECYCLE-004                    | P0       |
| SC-012      | 휴지통 전체 비우기       | REQ-RECYCLE-004                    | P1       |
| SC-013      | 달력 뷰에서 할일 확인    | REQ-CALENDAR-001~002               | P0       |
| SC-014      | 달력에서 주/일별 보기 전환 | REQ-CALENDAR-003                   | P1       |
| SC-015      | 달력 툴팁 기능 사용      | REQ-CALENDAR-004                   | P1       |
| SC-016      | 사용자 정의 알림 표시    | REQ-NOTIFICATION-001~002           | P0       |
| SC-017      | 공휴일 동기화 안내 알림  | REQ-NOTIFICATION-001, REQ-KASI-001 | P1       |

### 6.2 페르소나별 시나리오 분포

| 페르소나      | 주요 시나리오                                                  | 시나리오 수 |
| ------------- | -------------------------------------------------------------- | ----------- |
| 대학생 이계획 | SC-001, SC-004, SC-007, SC-012, SC-014, SC-016                | 6           |
| 직장인 김효율 | SC-002, SC-003, SC-005, SC-006, SC-008, SC-009, SC-010, SC-011, SC-013, SC-015, SC-017 | 11          |

---

## 7. 테스트 케이스 참조

이 문서의 각 시나리오는 QA 팀의 테스트 케이스 작성 기반이 됩니다.

**테스트 케이스 작성 가이드**:

- 각 시나리오 ID에 대응하는 테스트 케이스 ID: TC-XXX
- 예: SC-001 → TC-001-001 (정상), TC-001-002 (예외)
- 예외 시나리오: SC-E001 → TC-E001
- 엣지 케이스: SC-EDGE-001 → TC-EDGE-001

---

## 부록

### A. 관련 문서

- [PRD](./2-product-requirements.md)
- [도메인 정의서](./1-domain-definition.md)
- [API 명세서](./3-api-specification.md) (예정)

### B. 용어 정의

- [도메인 정의서 7. 비즈니스 용어 정의 참조](./1-domain-definition.md#7-비즈니스-용어-정의)

---

**문서 종료**
